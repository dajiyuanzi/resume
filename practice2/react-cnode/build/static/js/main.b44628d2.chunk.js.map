{"version":3,"sources":["components/Header.js","components/Data.js","components/filters.js","components/Pagination.js","components/PostList.js","components/Article.js","components/SideBar.js","components/UserInfo.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","className","to","src","alt","href","Component","GetData","url","Para","callback","axios","get","params","then","res","catch","error","console","log","tabFormatter","post","good","top","tab","formatDate","str","date","Date","time","getTime","parseInt","Pagination","state","pageBtn","leftEllipsis","currentPage","onClick","this","changeBtn","bind","map","item","key","page","setState","shift","splice","unshift","onPage","target","innerText","PostList","loading","posts","reqPost","limit","data","postDom","id","author","avatar_url","reply_count","visit_count","loginname","title","last_reply_at","class","Article","reqArticle","create_at","dangerouslySetInnerHTML","__html","content","replies","reply","index","ups","length","match","success","nextProps","SideBar","userinfo","reqUser","topicLimitBy5","list","replyLimitBy5","name","recent_topics","slice","recent_replies","UserInfo","laoding","score","App","exact","path","component","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b44628d2.chunk.js","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport '../styles/Header.css'\r\n\r\nexport default class Header extends Component {\r\n  constructor(props){\r\n    super(props)\r\n  }\r\n  \r\n  render(){\r\n    return (\r\n      <div className=\"header\">\r\n        <Link to=\"/\">\r\n          <img src=\"/cnodejs_light.svg\" alt=\"\"/>\r\n        </Link>\r\n        <ul>\r\n          <li><a href=\"/\">首页</a></li>\r\n          <li><a href=\"#\">新手入门</a></li>\r\n          <li><a href=\"#\">API</a></li>\r\n          <li><a href=\"#\">关于</a></li>\r\n          <li><a href=\"#\">注册</a></li>\r\n          <li><a href=\"#\">注册登录</a></li>\r\n        </ul>\r\n      </div>\r\n    )\r\n  }\r\n}","import axios from 'axios'\r\n\r\nexport default function GetData(url, Para, callback){\r\n  axios.get(url, {\r\n    params: Para //用params里的参数在url的方式：url?para1=xxx&para2=xxx，若url不需要'?para'此形式，可以直接在url里拼接参数，para的{}设为空\r\n  })\r\n  .then(function(res){\r\n    callback(res)\r\n  })\r\n  .catch(function (error) {\r\n    console.log(error);\r\n  });\r\n}","\r\nexport function tabFormatter(post){\r\n  if(post.good === true){\r\n    return '精华'\r\n  }\r\n  else if(post.top === true){\r\n    return '置顶'\r\n  }\r\n  else if(post.tab === 'ask'){\r\n    return '问答'\r\n  }\r\n  else if(post.tab === 'share'){\r\n    return '分享'\r\n  }\r\n  else{\r\n    return '招聘'\r\n  }\r\n}\r\n\r\nexport function formatDate(str){\r\n  if (!str) return ''\r\n  var date = new Date(str)\r\n  var time = new Date().getTime() - date.getTime() //现在的时间-传入的时间 = 相差的时间（单位 = 毫秒）\r\n  if (time < 0) {\r\n    return ''\r\n  } else if ((time / 1000 < 30)) {\r\n    return '刚刚'\r\n  } else if (time / 1000 < 60) {\r\n    return parseInt((time / 1000)) + '秒前'\r\n  } else if ((time / 60000) < 60) {\r\n    return parseInt((time / 60000)) + '分钟前'\r\n  } else if ((time / 3600000) < 24) {\r\n    return parseInt(time / 3600000) + '小时前'\r\n  } else if ((time / 86400000) < 31) {\r\n    return parseInt(time / 86400000) + '天前'\r\n  } else if ((time / 2592000000) < 12) {\r\n    return parseInt(time / 2592000000) + '月前'\r\n  } else {\r\n    return parseInt(time / 31536000000) + '年前'\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport '../styles/Pagination.css'\r\n\r\nexport default class Pagination extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      pageBtn: [1, 2, 3, 4, 5, '......'], //只显示4个页码\r\n      leftEllipsis: false,\r\n      currentPage: 1\r\n    }\r\n    this.currentPage = 1\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div className=\"pagination\">\r\n        <button onClick={this.changeBtn.bind(this)} >首页</button>\r\n        <button onClick={this.changeBtn.bind(this)} >上一页</button>\r\n\r\n        {\r\n          this.state.leftEllipsis === true ? \r\n            <button className=\"pagebtn\">......</button> : null\r\n        }\r\n        {\r\n          this.state.pageBtn.map((item)=>{\r\n            return (\r\n              <button key={item}\r\n                onClick={ this.changeBtn.bind(this, item) } \r\n                className={ `${item===this.state.currentPage ? 'currentPage' : null} pagebtn` }\r\n              >\r\n                {item}\r\n              </button>\r\n            )\r\n          })\r\n        }\r\n\r\n        <button onClick={this.changeBtn.bind(this)} >下一页</button>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  //页码变动\r\n  changeBtn(page){ \r\n    //点击的不是 页码，而是 上一页/下一页/首页\r\n    if( typeof page != 'number' ){\r\n      switch(page.target.innerText){\r\n        case '上一页':\r\n          if(this.currentPage === 1){\r\n            return\r\n          }\r\n          this.currentPage--\r\n          this.changeBtn(this.currentPage)\r\n          break\r\n\r\n        case '下一页':\r\n          this.currentPage++\r\n          this.changeBtn(this.currentPage)\r\n          break\r\n\r\n        case '首页':\r\n          this.setState({ pageBtn:[1,2,3,4,5,'......'] }) //点击首页时，就要重置页码展示\r\n          this.changeBtn(1)\r\n          break\r\n\r\n        default:\r\n          break\r\n      }\r\n      return //退出函数，不再执行下面的\r\n    }\r\n\r\n    this.currentPage = page\r\n    this.setState({currentPage: this.currentPage})\r\n\r\n    //判断 页码栏左侧的“...”按钮 是否出现\r\n    if(page>4){\r\n      this.setState({leftEllipsis: true})\r\n    }\r\n    else{\r\n      this.setState({leftEllipsis: false})\r\n    }\r\n\r\n    //页码只显示5个，往后/往前点多了，前面/后面的会被挤掉\r\n    if(page === this.state.pageBtn[4]){ //朝后翻页\r\n      this.state.pageBtn.shift() //移除第1个元素 只剩4个了 原先的第5个成第4个\r\n      this.state.pageBtn.splice(4, 0, this.state.pageBtn[3]+1) //添加尾部页码: 剩余只有4个数，splice的下标从1开始，所以在第4个数pagebtn[3] 后添加\r\n      this.setState({ pageBtn: this.state.pageBtn })\r\n    }\r\n    else if(page === this.state.pageBtn[0] && page != 1){//朝前翻页\r\n      this.state.pageBtn.unshift(this.state.pageBtn[0]-1) //先在第1个位置加1个数\r\n      this.state.pageBtn.splice(5, 1) //移除最后1个数字\r\n      this.setState({ pageBtn: this.state.pageBtn })\r\n    }\r\n\r\n    this.props.onPage(this.currentPage) //向其父组件PostList发送 点击的页码\r\n  }\r\n\r\n}","import React, { Component } from 'react'\r\nimport '../styles/PostList.css' \r\nimport { Link } from \"react-router-dom\"\r\nimport GetData from './Data'\r\nimport { tabFormatter, formatDate } from './filters'\r\nimport Pagination from './Pagination'\r\n\r\nexport default class PostList extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      loading: true,\r\n      posts:[]\r\n    }\r\n    this.page=1 // current page num\r\n\r\n    this.reqPost()\r\n  }\r\n  \r\n  reqPost(){\r\n    GetData('https://cnodejs.org/api/v1/topics', \r\n      {\r\n        page: this.page,\r\n        limit: 20\r\n      }, \r\n      (res)=>{\r\n        this.setState({\r\n          loading: false, //加载成功后，去除 加载动画\r\n          posts: res.data.data //返回的数据json格式中有data属性下的data属性\r\n        })\r\n        console.log(res)\r\n      }\r\n    )\r\n  }\r\n\r\n  render(){\r\n    let postDom = this.state.posts.map((item)=>{\r\n      return (\r\n        <li key={item.id}>\r\n           {/* 头像 */}\r\n          <img src={item.author.avatar_url} />\r\n\r\n          {/* 回复/浏览 */}\r\n          <span>\r\n            <span className=\"reply_count\">{item.reply_count}/{item.visit_count}</span>\r\n          </span>\r\n\r\n          {/* 帖子的分类--class动态绑定: 若帖子json中的“精华/置顶”属性为true，则让相应的css类为true */}\r\n          <span className={\r\n            `${item.good===true ? 'put_good' : null} \r\n            ${item.top===true ? 'put_top' : null}`\r\n          }>\r\n            <span>{ tabFormatter(item) }</span>\r\n          </span>\r\n          \r\n          {/* 标题&文章路由链接 */}\r\n          <Link to={`/topic/${item.id}&author=${item.author.loginname}`} >\r\n            <span>{item.title}</span>\r\n          </Link>\r\n\r\n          {/* 最终回复时间 */}\r\n          <span className=\"last_reply\">\r\n            {formatDate(item.last_reply_at)}\r\n          </span>\r\n        </li>\r\n      )\r\n    })\r\n\r\n    return (\r\n      <div className=\"PostList\">\r\n        {\r\n          this.state.loading === true ?\r\n          <div className=\"loading\">\r\n            <img src=\"/loading.gif\" />\r\n          </div>\r\n          :\r\n          <div className=\"posts\"> \r\n            <ul>\r\n              <li>\r\n                <div class=\"toobar\">\r\n                  <span>全部</span>\r\n                  <span>精华</span>\r\n                  <span>分享</span>\r\n                  <span>问答</span>\r\n                  <span>招聘</span>\r\n                </div>\r\n              </li>\r\n              {postDom}\r\n              \r\n              {/* 分页：点击翻页就申请更多数据 */}\r\n              <li>\r\n                <Pagination onPage={this.currentPage.bind(this)} />\r\n              </li>\r\n            </ul>\r\n          </div>\r\n        }\r\n      </div>\r\n    )  \r\n  }\r\n\r\n  //根据当前的页码请求数据\r\n  currentPage(page){\r\n    this.page = page\r\n    this.reqPost()\r\n  }\r\n\r\n}","import React, { Component } from 'react'\r\nimport '../styles/Article.css'\r\nimport { tabFormatter, formatDate } from './filters'\r\nimport { Link } from \"react-router-dom\"\r\nimport GetData from './Data'\r\n\r\nexport default class Article extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      loading: true, //是否正在加载\r\n      post: {} //代表当前文章页的所有内容，所有属性\r\n    }\r\n    this.reqArticle()\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"article\">\r\n        {\r\n          this.state.loading===true ? \r\n          <div class='loading'>\r\n            <img src='/loading.gif' />\r\n          </div> \r\n          : \r\n          <div>\r\n            <div className='topic_header'>\r\n              <div className='topic_title'>{this.state.post.title}</div>\r\n              <ul>\r\n                <li>· 发布于: { formatDate(this.state.post.create_at) }</li>\r\n                <li>· 作者：{ this.state.post.author.loginname }</li>\r\n                <li>· { this.state.post.visit_count }次浏览</li>\r\n                <li>· 来自{ tabFormatter(this.state.post) }</li>\r\n              </ul>\r\n\r\n              {/* 因为帖子内容为markdown，所以要解析为html，等于vue的v-html */}\r\n              <div class=\"topic_content\" \r\n                dangerouslySetInnerHTML={{ __html: this.state.post.content }}\r\n              ></div>\r\n            </div>\r\n            \r\n            <div>\r\n              <div className=\"topbar\">回复</div>\r\n              {\r\n                this.state.post.replies.map((reply, index)=>{\r\n                  return (\r\n                    <div key={reply.id} className='replySec'>\r\n                      <div className='replyUp'>\r\n                        \r\n                        {/* 点击用户头像/姓名，跳转至用户页 */}\r\n                        <Link to={`/userinfo/${reply.author.loginname}`}>\r\n                          <img src={reply.author.avatar_url} />\r\n                        </Link>\r\n                        <Link to={`/userinfo/${reply.author.loginname}`}>\r\n                          <span>{reply.author.loginname}</span>\r\n                        </Link>\r\n\r\n                        <span>{index+1}楼</span>\r\n                        \r\n                        {/* 获赞数，为0就不显示 */}\r\n                        {\r\n                          reply.ups.length>0 ? \r\n                          <span>{reply.ups.length}</span> : <span></span>\r\n                        }       \r\n                      </div>\r\n                      {/* 评论内容 */}\r\n                      <p dangerouslySetInnerHTML={{ __html: reply.content }} ></p>\r\n                    </div>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  reqArticle(){\r\n    //请求数据，参数是App.js中的Route所接收，由PostList.js中的Link发送\r\n    GetData('https://cnodejs.org/api/v1/topic/'+this.props.match.params.id, {}, (res)=>{\r\n      if(res.data.success === true){\r\n        this.setState({ \r\n          post: res.data.data,\r\n          loading: false // 不再显示“正在加载”动画\r\n        })\r\n        console.log(res)\r\n      }     \r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if(nextProps.match.params.id != this.props.match.params.id){\r\n      this.props.match.params.id = nextProps.match.params.id\r\n      this.reqArticle()\r\n    }\r\n  } //Article和SideBar组件使用相同的route path但参数不同，页面不会因参数变动而更新渲染；只有监控route传入的props，以触发更新\r\n\r\n}","import React, { Component } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport GetData from './Data'\r\nimport '../styles/SideBar.css'\r\n\r\nexport default class SideBar extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      userinfo:{}\r\n    }\r\n    this.reqUser()\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className='autherinfo'>\r\n        <div className='authersummary'>\r\n          <div className='topbar'>作者</div>\r\n          <Link\r\n            to={`/userinfo/${this.state.userinfo.loginname}`}\r\n          >\r\n            <img src={this.state.userinfo.avatar_url} />\r\n          </Link>\r\n        </div>\r\n\r\n        <div className='recent_topics'>\r\n          <div className='topbar'>作者最近主题</div>\r\n          <ul>\r\n            {\r\n              this.topicLimitBy5().map((list)=>{\r\n                return (\r\n                  <li key={list.id}><Link to={`/topic/${list.id}&author=${list.author.loginname}`}>\r\n                    {list.title}\r\n                  </Link></li>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n        </div>\r\n\r\n        <div className='recent_replies'>\r\n          <div className='tobar'>作者最近回复</div>\r\n          <ul>\r\n            {\r\n              this.replyLimitBy5().map((list)=>{\r\n                return (\r\n                  <li key={list.id}>\r\n                    <Link to={`/topic/${list.id}&author=${list.author.loginname}`}>\r\n                      {list.title}\r\n                    </Link>\r\n                  </li>\r\n                )\r\n              })\r\n            }\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  reqUser(){\r\n    //请求数据，参数是App.js中的Route所接收，由PostList.js中的Link发送\r\n    GetData(`https://cnodejs.org/api/v1/user/${this.props.match.params.name}`, {}, (res)=>{\r\n      this.setState({\r\n        userinfo: res.data.data\r\n      })\r\n      console.log(res)\r\n    })\r\n  }\r\n\r\n  //作者最近主题，最多显示5条\r\n  topicLimitBy5(){\r\n    if(this.state.userinfo.recent_topics){ //当userinfo不为空，就返回5个  length>会报错，因为当请求数据还未返回，userinfo是空，其length为undefined\r\n      return this.state.userinfo.recent_topics.slice(0, 5) //slice 数组从坐标0-5截取出，不包括5\r\n    }else{ //有的时候此数据为undefined，上面map会报错，故返回空数组填充\r\n      return []\r\n    }\r\n  }\r\n\r\n  //作者最近回复，最多显示5条 \r\n  replyLimitBy5(){\r\n    if(this.state.userinfo.recent_replies){\r\n      return this.state.userinfo.recent_replies.slice(0, 5)\r\n    }else{ //有的时候此数据为空，上面map会报错，故返回空数组\r\n      return []\r\n    }\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    if(nextProps.match.params.name != this.props.match.params.name){\r\n      this.props.match.params.name = nextProps.match.params.name\r\n      this.reqUser()\r\n    }\r\n  } //Article和SideBar组件使用相同的route path但参数不同，页面不会因参数变动而更新渲染；只有监控route传入的props，以触发更新\r\n\r\n\r\n}","import React, { Component } from 'react'\r\nimport { formatDate } from './filters'\r\nimport { Link } from 'react-router-dom'\r\nimport '../styles/UserInfo.css'\r\nimport GetData from'./Data'\r\n\r\nexport default class UserInfo extends Component {\r\n  constructor(props){\r\n    super(props)\r\n    this.state = {\r\n      userinfo:{\r\n        recent_replies:[], //初始化第一次渲染时,异步数据返回之前，这几个数据是undefined，下面map会报错，故给个初始值［］就好\r\n        recent_topics:[]\r\n      },\r\n      laoding: true //加载动画\r\n    }\r\n    this.reqUser()\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div className='UserInfo'>\r\n        {\r\n          this.state.loading === true ? \r\n          <div className='loading'>\r\n            <img src='/loading.gif' />\r\n          </div> \r\n          : \r\n          <div className='userInformation'>\r\n            <section>\r\n              <img src={this.state.userinfo.avatar_url} />\r\n              <span>{this.state.userinfo.loginname}</span>\r\n              <p>{this.state.userinfo.score}积分</p>\r\n              <p>注册时间：{ formatDate(this.state.userinfo.create_at) }</p>\r\n            </section>\r\n\r\n            <div className='replies'>\r\n              <p>回复的主题</p>\r\n              <ul>\r\n                {/* 点击文章并跳转 */}\r\n                {\r\n                  this.state.userinfo.recent_replies.map((item)=>{\r\n                    return (\r\n                      <li key={item.id}>\r\n                        <Link to={`/topic/${item.id}&author=${this.props.match.params.name}`} >{item.title}</Link>\r\n                      </li>\r\n                    )\r\n                  })\r\n                }\r\n              </ul>\r\n            </div>\r\n\r\n            <div className='topics'>\r\n                <p>创建的主题</p>\r\n                <ul>\r\n                  {\r\n                    this.state.userinfo.recent_topics.map((item)=>{\r\n                      return (\r\n                        <li key={item.id}>\r\n                          <Link to={`/topic/${item.id}&author=${this.props.match.params.name}`} >{item.title}</Link>\r\n                        </li>\r\n                      )\r\n                    })\r\n                  }\r\n                </ul>\r\n            </div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n\r\n  reqUser(){\r\n    //请求数据，参数是App.js中的Route所接收，由SideBar.js中的Link发送\r\n    GetData(`https://cnodejs.org/api/v1/user/${this.props.match.params.name}`, {}, (res)=>{            \r\n      this.setState({\r\n        userinfo: res.data.data,\r\n        loading: false //加载动画停止\r\n      })\r\n    })\r\n  }\r\n\r\n}\r\n","import React, { Component } from 'react';\nimport './App.css';\nimport { BrowserRouter as Router, Route } from \"react-router-dom\"\nimport Header from './components/Header'\nimport PostList from './components/PostList'\nimport Article from './components/Article'\nimport SideBar from './components/SideBar'\nimport UserInfo from './components/UserInfo'\n\nexport default class App extends Component {\n\n  render(){\n    return (\n      <div className=\"App\">\n        <Router>\n          <Header />\n          <div className=\"main\">\n            {/* 首页的帖子列表页 */}\n            <Route exact path=\"/\" component={ PostList }></Route>\n\n            {/* 进入帖子页 */}\n            <Route path=\"/topic/:id&author=:name\" component={ SideBar }></Route>\n            <Route path=\"/topic/:id&author=:name\" component={ Article }></Route>\n\n            {/* 用户页 */}\n            <Route path='/userinfo/:name' component={ UserInfo }></Route>\n          </div>\n        </Router>     \n      </div>\n    )\n  }\n}\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}