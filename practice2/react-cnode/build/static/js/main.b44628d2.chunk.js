(this["webpackJsonpreact-cnode"]=this["webpackJsonpreact-cnode"]||[]).push([[0],{32:function(e,t,a){e.exports=a(67)},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),l=(a(37),a(3)),i=a(4),o=a(6),u=a(5),m=a(7),p=(a(38),a(2)),h=a(12),E=(a(39),function(e){function t(e){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement(p.b,{to:"/"},r.a.createElement("img",{src:"/cnodejs_light.svg",alt:""})),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"/"},"\u9996\u9875")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\u65b0\u624b\u5165\u95e8")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"API")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\u5173\u4e8e")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\u6ce8\u518c")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"\u6ce8\u518c\u767b\u5f55"))))}}]),t}(n.Component)),g=(a(45),a(31)),d=a.n(g);function f(e,t,a){d.a.get(e,{params:t}).then((function(e){a(e)})).catch((function(e){console.log(e)}))}function v(e){return!0===e.good?"\u7cbe\u534e":!0===e.top?"\u7f6e\u9876":"ask"===e.tab?"\u95ee\u7b54":"share"===e.tab?"\u5206\u4eab":"\u62db\u8058"}function b(e){if(!e)return"";var t=new Date(e),a=(new Date).getTime()-t.getTime();return a<0?"":a/1e3<30?"\u521a\u521a":a/1e3<60?parseInt(a/1e3)+"\u79d2\u524d":a/6e4<60?parseInt(a/6e4)+"\u5206\u949f\u524d":a/36e5<24?parseInt(a/36e5)+"\u5c0f\u65f6\u524d":a/864e5<31?parseInt(a/864e5)+"\u5929\u524d":a/2592e6<12?parseInt(a/2592e6)+"\u6708\u524d":parseInt(a/31536e6)+"\u5e74\u524d"}a(63);var y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={pageBtn:[1,2,3,4,5,"......"],leftEllipsis:!1,currentPage:1},a.currentPage=1,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"pagination"},r.a.createElement("button",{onClick:this.changeBtn.bind(this)},"\u9996\u9875"),r.a.createElement("button",{onClick:this.changeBtn.bind(this)},"\u4e0a\u4e00\u9875"),!0===this.state.leftEllipsis?r.a.createElement("button",{className:"pagebtn"},"......"):null,this.state.pageBtn.map((function(t){return r.a.createElement("button",{key:t,onClick:e.changeBtn.bind(e,t),className:"".concat(t===e.state.currentPage?"currentPage":null," pagebtn")},t)})),r.a.createElement("button",{onClick:this.changeBtn.bind(this)},"\u4e0b\u4e00\u9875"))}},{key:"changeBtn",value:function(e){if("number"==typeof e)this.currentPage=e,this.setState({currentPage:this.currentPage}),e>4?this.setState({leftEllipsis:!0}):this.setState({leftEllipsis:!1}),e===this.state.pageBtn[4]?(this.state.pageBtn.shift(),this.state.pageBtn.splice(4,0,this.state.pageBtn[3]+1),this.setState({pageBtn:this.state.pageBtn})):e===this.state.pageBtn[0]&&1!=e&&(this.state.pageBtn.unshift(this.state.pageBtn[0]-1),this.state.pageBtn.splice(5,1),this.setState({pageBtn:this.state.pageBtn})),this.props.onPage(this.currentPage);else switch(e.target.innerText){case"\u4e0a\u4e00\u9875":if(1===this.currentPage)return;this.currentPage--,this.changeBtn(this.currentPage);break;case"\u4e0b\u4e00\u9875":this.currentPage++,this.changeBtn(this.currentPage);break;case"\u9996\u9875":this.setState({pageBtn:[1,2,3,4,5,"......"]}),this.changeBtn(1)}}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,posts:[]},a.page=1,a.reqPost(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"reqPost",value:function(){var e=this;f("https://cnodejs.org/api/v1/topics",{page:this.page,limit:20},(function(t){e.setState({loading:!1,posts:t.data.data}),console.log(t)}))}},{key:"render",value:function(){var e=this.state.posts.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("img",{src:e.author.avatar_url}),r.a.createElement("span",null,r.a.createElement("span",{className:"reply_count"},e.reply_count,"/",e.visit_count)),r.a.createElement("span",{className:"".concat(!0===e.good?"put_good":null," \n            ").concat(!0===e.top?"put_top":null)},r.a.createElement("span",null,v(e))),r.a.createElement(p.b,{to:"/topic/".concat(e.id,"&author=").concat(e.author.loginname)},r.a.createElement("span",null,e.title)),r.a.createElement("span",{className:"last_reply"},b(e.last_reply_at)))}));return r.a.createElement("div",{className:"PostList"},!0===this.state.loading?r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/loading.gif"})):r.a.createElement("div",{className:"posts"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",{class:"toobar"},r.a.createElement("span",null,"\u5168\u90e8"),r.a.createElement("span",null,"\u7cbe\u534e"),r.a.createElement("span",null,"\u5206\u4eab"),r.a.createElement("span",null,"\u95ee\u7b54"),r.a.createElement("span",null,"\u62db\u8058"))),e,r.a.createElement("li",null,r.a.createElement(y,{onPage:this.currentPage.bind(this)})))))}},{key:"currentPage",value:function(e){this.page=e,this.reqPost()}}]),t}(n.Component),k=(a(64),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={loading:!0,post:{}},a.reqArticle(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"article"},!0===this.state.loading?r.a.createElement("div",{class:"loading"},r.a.createElement("img",{src:"/loading.gif"})):r.a.createElement("div",null,r.a.createElement("div",{className:"topic_header"},r.a.createElement("div",{className:"topic_title"},this.state.post.title),r.a.createElement("ul",null,r.a.createElement("li",null,"\xb7 \u53d1\u5e03\u4e8e: ",b(this.state.post.create_at)),r.a.createElement("li",null,"\xb7 \u4f5c\u8005\uff1a",this.state.post.author.loginname),r.a.createElement("li",null,"\xb7 ",this.state.post.visit_count,"\u6b21\u6d4f\u89c8"),r.a.createElement("li",null,"\xb7 \u6765\u81ea",v(this.state.post))),r.a.createElement("div",{class:"topic_content",dangerouslySetInnerHTML:{__html:this.state.post.content}})),r.a.createElement("div",null,r.a.createElement("div",{className:"topbar"},"\u56de\u590d"),this.state.post.replies.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"replySec"},r.a.createElement("div",{className:"replyUp"},r.a.createElement(p.b,{to:"/userinfo/".concat(e.author.loginname)},r.a.createElement("img",{src:e.author.avatar_url})),r.a.createElement(p.b,{to:"/userinfo/".concat(e.author.loginname)},r.a.createElement("span",null,e.author.loginname)),r.a.createElement("span",null,t+1,"\u697c"),e.ups.length>0?r.a.createElement("span",null,e.ups.length):r.a.createElement("span",null)),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content}}))})))))}},{key:"reqArticle",value:function(){var e=this;f("https://cnodejs.org/api/v1/topic/"+this.props.match.params.id,{},(function(t){!0===t.data.success&&(e.setState({post:t.data.data,loading:!1}),console.log(t))}))}},{key:"componentWillReceiveProps",value:function(e){e.match.params.id!=this.props.match.params.id&&(this.props.match.params.id=e.match.params.id,this.reqArticle())}}]),t}(n.Component)),O=(a(65),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={userinfo:{}},a.reqUser(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"autherinfo"},r.a.createElement("div",{className:"authersummary"},r.a.createElement("div",{className:"topbar"},"\u4f5c\u8005"),r.a.createElement(p.b,{to:"/userinfo/".concat(this.state.userinfo.loginname)},r.a.createElement("img",{src:this.state.userinfo.avatar_url}))),r.a.createElement("div",{className:"recent_topics"},r.a.createElement("div",{className:"topbar"},"\u4f5c\u8005\u6700\u8fd1\u4e3b\u9898"),r.a.createElement("ul",null,this.topicLimitBy5().map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(p.b,{to:"/topic/".concat(e.id,"&author=").concat(e.author.loginname)},e.title))})))),r.a.createElement("div",{className:"recent_replies"},r.a.createElement("div",{className:"tobar"},"\u4f5c\u8005\u6700\u8fd1\u56de\u590d"),r.a.createElement("ul",null,this.replyLimitBy5().map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(p.b,{to:"/topic/".concat(e.id,"&author=").concat(e.author.loginname)},e.title))})))))}},{key:"reqUser",value:function(){var e=this;f("https://cnodejs.org/api/v1/user/".concat(this.props.match.params.name),{},(function(t){e.setState({userinfo:t.data.data}),console.log(t)}))}},{key:"topicLimitBy5",value:function(){return this.state.userinfo.recent_topics?this.state.userinfo.recent_topics.slice(0,5):[]}},{key:"replyLimitBy5",value:function(){return this.state.userinfo.recent_replies?this.state.userinfo.recent_replies.slice(0,5):[]}},{key:"componentWillReceiveProps",value:function(e){e.match.params.name!=this.props.match.params.name&&(this.props.match.params.name=e.match.params.name,this.reqUser())}}]),t}(n.Component)),_=(a(66),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={userinfo:{recent_replies:[],recent_topics:[]},laoding:!0},a.reqUser(),a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"UserInfo"},!0===this.state.loading?r.a.createElement("div",{className:"loading"},r.a.createElement("img",{src:"/loading.gif"})):r.a.createElement("div",{className:"userInformation"},r.a.createElement("section",null,r.a.createElement("img",{src:this.state.userinfo.avatar_url}),r.a.createElement("span",null,this.state.userinfo.loginname),r.a.createElement("p",null,this.state.userinfo.score,"\u79ef\u5206"),r.a.createElement("p",null,"\u6ce8\u518c\u65f6\u95f4\uff1a",b(this.state.userinfo.create_at))),r.a.createElement("div",{className:"replies"},r.a.createElement("p",null,"\u56de\u590d\u7684\u4e3b\u9898"),r.a.createElement("ul",null,this.state.userinfo.recent_replies.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(p.b,{to:"/topic/".concat(t.id,"&author=").concat(e.props.match.params.name)},t.title))})))),r.a.createElement("div",{className:"topics"},r.a.createElement("p",null,"\u521b\u5efa\u7684\u4e3b\u9898"),r.a.createElement("ul",null,this.state.userinfo.recent_topics.map((function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(p.b,{to:"/topic/".concat(t.id,"&author=").concat(e.props.match.params.name)},t.title))}))))))}},{key:"reqUser",value:function(){var e=this;f("https://cnodejs.org/api/v1/user/".concat(this.props.match.params.name),{},(function(t){e.setState({userinfo:t.data.data,loading:!1})}))}}]),t}(n.Component)),N=function(e){function t(){return Object(l.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p.a,null,r.a.createElement(E,null),r.a.createElement("div",{className:"main"},r.a.createElement(h.a,{exact:!0,path:"/",component:j}),r.a.createElement(h.a,{path:"/topic/:id&author=:name",component:O}),r.a.createElement(h.a,{path:"/topic/:id&author=:name",component:k}),r.a.createElement(h.a,{path:"/userinfo/:name",component:_}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[32,1,2]]]);
//# sourceMappingURL=main.b44628d2.chunk.js.map